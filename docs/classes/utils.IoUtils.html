<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Expresser - utils.IoUtils</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-9331973-3"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-9331973-3');
</script><script>if (location.protocol.match(/^http/) && location.pathname.match('\.html') === null && location.pathname.slice(-1) !== '/') {
  location.href = location.href + '/';
}</script><link href="../bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script><script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]--><link href="../google-code-prettify/prettify.css" rel="stylesheet" type="text/css"><link href="../style.css" rel="stylesheet" type="text/css"></head><body data-spy="scroll" data-target=".sidebar"><nav class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#top-navigation-collapse"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div class="collapse navbar-collapse" id="top-navigation-collapse"><ul class="nav navbar-nav"><li><a href="../index.html">Home</a></li><li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Guides <span class="caret"></span></a><ul class="dropdown-menu"><li><a href="../guides/App.html">App</a></li><li><a href="../guides/Errors.html">Errors</a></li><li><a href="../guides/Events.html">Events</a></li><li><a href="../guides/Logger.html">Logger</a></li><li><a href="../guides/Settings.html">Settings</a></li><li><a href="../guides/Utils.html">Utils</a></li></ul></li><li class="active"><a href="../classes/index.html">Classes - utils.IoUtils</a></li><li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Files <span class="caret"></span></a><ul class="dropdown-menu"><li><a href="../files/app.coffee.html">app.coffee</a></li><li><a href="../files/errors.coffee.html">errors.coffee</a></li><li><a href="../files/events.coffee.html">events.coffee</a></li><li><a href="../files/index.coffee.html">index.coffee</a></li><li><a href="../files/logger.coffee.html">logger.coffee</a></li><li><a href="../files/settings.coffee.html">settings.coffee</a></li><li><a href="../files/utils.coffee.html">utils.coffee</a></li><li><a href="../files/aws.dynamodb.coffee.html">aws/dynamodb.coffee</a></li><li><a href="../files/aws.index.coffee.html">aws/index.coffee</a></li><li><a href="../files/aws.s3.coffee.html">aws/s3.coffee</a></li><li><a href="../files/aws.sns.coffee.html">aws/sns.coffee</a></li><li><a href="../files/cron.index.coffee.html">cron/index.coffee</a></li><li><a href="../files/downloader.index.coffee.html">downloader/index.coffee</a></li><li><a href="../files/gcloud.datastore.coffee.html">gcloud/datastore.coffee</a></li><li><a href="../files/gcloud.index.coffee.html">gcloud/index.coffee</a></li><li><a href="../files/gcloud.storage.coffee.html">gcloud/storage.coffee</a></li><li><a href="../files/logger-file.index.coffee.html">logger-file/index.coffee</a></li><li><a href="../files/logger-logentries.index.coffee.html">logger-logentries/index.coffee</a></li><li><a href="../files/logger-loggly.index.coffee.html">logger-loggly/index.coffee</a></li><li><a href="../files/mailer.index.coffee.html">mailer/index.coffee</a></li><li><a href="../files/mailer.templates.coffee.html">mailer/templates.coffee</a></li><li><a href="../files/metrics.httpserver.coffee.html">metrics/httpserver.coffee</a></li><li><a href="../files/metrics.index.coffee.html">metrics/index.coffee</a></li><li><a href="../files/metrics.percentile.coffee.html">metrics/percentile.coffee</a></li><li><a href="../files/mongodb.index.coffee.html">mongodb/index.coffee</a></li><li><a href="../files/sockets.index.coffee.html">sockets/index.coffee</a></li><li><a href="../files/utils.browser.coffee.html">utils/browser.coffee</a></li><li><a href="../files/utils.data.coffee.html">utils/data.coffee</a></li><li><a href="../files/utils.io.coffee.html">utils/io.coffee</a></li><li><a href="../files/utils.network.coffee.html">utils/network.coffee</a></li><li><a href="../files/utils.system.coffee.html">utils/system.coffee</a></li></ul></li></ul><div class="options"><label class="checkbox"><input id="options-private" type="checkbox"> Private</label></div></div></div></nav><div class="container-fluid content"><div class="row"><div class="hidden-xs sidebar col-sm-3" data-spy="affix"><div class="cormo-sidenav"><div class="panel panel-default"><div class="panel-collapse collapse in" id="undefined_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/App.html">App</a></li><li><a href="../classes/Errors.html">Errors</a></li><li><a href="../classes/Events.html">Events</a></li><li><a href="../classes/Expresser.html">Expresser</a></li><li><a href="../classes/Logger.html">Logger</a></li><li><a href="../classes/Settings.html">Settings</a></li><li><a href="../classes/Utils.html">Utils</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading" data-toggle="collapse" data-target="#aws_body">aws<span class="pull-right glyphicon"></span></div><div class="panel-collapse collapse in" id="aws_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/aws.AWS.html">AWS</a></li><li><a href="../classes/aws.DynamoDB.html">DynamoDB</a></li><li><a href="../classes/aws.S3.html">S3</a></li><li><a href="../classes/aws.SNS.html">SNS</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading" data-toggle="collapse" data-target="#utils_body">utils<span class="pull-right glyphicon"></span></div><div class="panel-collapse collapse in" id="utils_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/utils.BrowserUtils.html">BrowserUtils</a></li><li><a href="../classes/utils.DataUtils.html">DataUtils</a></li><li class="active"><a href="#utils_IoUtils">IoUtils</a></li><li class="cormo-class-property"><a href="#utils_IoUtils__copyFileSync">copyFileSync</a></li><li class="cormo-class-property"><a href="#utils_IoUtils__getFilePath">getFilePath</a></li><li class="cormo-class-property"><a href="#utils_IoUtils__mkdirRecursive">mkdirRecursive</a></li><li class="cormo-class-property"><a href="#utils_IoUtils__sleep">sleep</a></li><li><a href="../classes/utils.NetworkUtils.html">NetworkUtils</a></li><li><a href="../classes/utils.SystemUtils.html">SystemUtils</a></li></ul></div></div></div></div><div class="col-sm-9 col-sm-offset-3"><span class="fix-anchor" id="utils_IoUtils"></span><section><h1 class="class_title">IoUtils</h1><div><p>IO utilities.</p>
</div><div></div><div class="showcode"><button class="btn btn-info">Show class code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//lib/utils/io.coffee#L10">/lib/utils/io.coffee:10</a>)</span></div><pre class="sourcecode prettyprint .linenums:10">class IoUtils
    newInstance: -&gt; return new IoUtils()</pre><div class="panel panel-info"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#utils_IoUtils_ctor_body"><h3 class="panel-title">Constructor<span class="pull-right glyphicon"></span></h3></div><div class="panel-collapse collapse" id="utils_IoUtils_ctor_body"><div class="panel-body"><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table></div></div></div></section><span class="fix-anchor" id="utils_IoUtils__copyFileSync"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#utils_IoUtils__copyFileSync_body"><h3 class="panel-title">IoUtils::copyFileSync(src, target)<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Copy the <code>src</code> file to the <code>target</code>, both must be the full file path.</p>
</div></div><div class="panel-collapse collapse" id="utils_IoUtils__copyFileSync_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>src</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> The full source file path.</span></td></tr><tr><td><span class="method-depth0"></span><code>target</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> The full target file path.</span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//lib/utils/io.coffee#L54">/lib/utils/io.coffee:54</a>)</span></div><pre class="sourcecode prettyprint .linenums:54">copyFileSync: (src, target) -&gt;
    srcContents = fs.readFileSync src
    fs.writeFileSync target, srcContents</pre></div></div></div></section><span class="fix-anchor" id="utils_IoUtils__getFilePath"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#utils_IoUtils__getFilePath_body"><h3 class="panel-title">IoUtils::getFilePath(filename)<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Helper to get the correct file path for the specified filename. This will look into the current
directory, the running directory and the root directory of the app.
Returns null if no file is found.</p>
</div></div><div class="panel-collapse collapse" id="utils_IoUtils__getFilePath_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>filename</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> The base filename (with extension) of the file.</span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td>(Returns)</td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span>The full path to the file if one was found, or null if not found.</span></td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//lib/utils/io.coffee#L20">/lib/utils/io.coffee:20</a>)</span></div><pre class="sourcecode prettyprint .linenums:20">getFilePath: (filename) -&gt;
    originalFilename = &quot;./&quot; + filename.toString()

    # Check if file exists.
    hasFile = fs.existsSync filename
    return filename if hasFile

    # Try current path...
    filename = path.resolve __dirname, originalFilename
    hasFile = fs.existsSync filename
    return filename if hasFile

    # Try application root path.
    filename = path.resolve path.dirname(require.main.filename), originalFilename
    hasFile = fs.existsSync filename
    return filename if hasFile

    # Try parent paths...
    filename = path.resolve __dirname, &quot;../../&quot;, originalFilename
    hasFile = fs.existsSync filename
    return filename if hasFile

    filename = path.resolve __dirname, &quot;../&quot;, originalFilename
    hasFile = fs.existsSync filename
    return filename if hasFile

    # Nothing found, so return null.
    return null</pre></div></div></div></section><span class="fix-anchor" id="utils_IoUtils__mkdirRecursive"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#utils_IoUtils__mkdirRecursive_body"><h3 class="panel-title">IoUtils::mkdirRecursive(target)<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Make sure the &quot;target&quot; directory exists by recursively iterating through its parents
and creating the directories. Returns nothing if all good or error.</p>
</div></div><div class="panel-collapse collapse" id="utils_IoUtils__mkdirRecursive_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>target</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> The full target path, with or without a trailing slash.</span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//lib/utils/io.coffee#L63">/lib/utils/io.coffee:63</a>)</span></div><pre class="sourcecode prettyprint .linenums:63">mkdirRecursive: (target) -&gt;
    return if fs.existsSync path.resolve(target)

    callback = (p, made) -&gt;
        made = null if not made

        p = path.resolve p

        try
            fs.mkdirSync p
        catch ex
            if ex.code is &quot;ENOENT&quot;
                made = callback path.dirname(p), made
                callback p, made
            else
                try
                    stat = fs.statSync p
                catch ex1
                    throw ex
                if not stat.isDirectory()
                    throw ex

        return made

    return callback target</pre></div></div></div></section><span class="fix-anchor" id="utils_IoUtils__sleep"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#utils_IoUtils__sleep_body"><h3 class="panel-title">IoUtils::sleep(milliseconds)<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Helper to delay async code execution. To be used inside async functions using await.</p>
</div></div><div class="panel-collapse collapse" id="utils_IoUtils__sleep_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>milliseconds</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number'>Number</a></span></td><td><span> How long to stall the execution for.</span></td></tr></table><h4>Returns<small><span> as</span><span class="label label-info">Promise</span></small></h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//lib/utils/io.coffee#L94">/lib/utils/io.coffee:94</a>)</span></div><pre class="sourcecode prettyprint .linenums:94">sleep: (milliseconds) =&gt;
    return new Promise (resolve, reject) -&gt; setTimeout(resolve, milliseconds)</pre></div></div></div></section></div></div></div><script src="https://code.jquery.com/jquery-3.2.1.min.js"></script><script src="../bootstrap/js/bootstrap.min.js"></script><script src="../google-code-prettify/prettify.js"></script><script src="../script.js"></script><script src="../group-examples.js"></script><a href="https://github.com/igoramadas/expresser"><img class="github-ribbon" src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png" alt="Fork me on GitHub"></a></body></html>