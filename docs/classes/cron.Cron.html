<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Expresser - cron.Cron</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-9331973-3"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-9331973-3');
</script><script>if (location.protocol.match(/^http/) && location.pathname.match('\.html') === null && location.pathname.slice(-1) !== '/') {
  location.href = location.href + '/';
}</script><link href="../bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script><script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]--><link href="../google-code-prettify/prettify.css" rel="stylesheet" type="text/css"><link href="../style.css" rel="stylesheet" type="text/css"></head><body data-spy="scroll" data-target=".sidebar"><nav class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#top-navigation-collapse"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div class="collapse navbar-collapse" id="top-navigation-collapse"><ul class="nav navbar-nav"><li><a href="../index.html">Home</a></li><li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Guides <span class="caret"></span></a><ul class="dropdown-menu"><li><a href="../guides/App.html">App</a></li><li><a href="../guides/Errors.html">Errors</a></li><li><a href="../guides/Events.html">Events</a></li><li><a href="../guides/Logger.html">Logger</a></li><li><a href="../guides/Settings.html">Settings</a></li><li><a href="../guides/Utils.html">Utils</a></li></ul></li><li class="active"><a href="../classes/index.html">Classes - cron.Cron</a></li><li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Files <span class="caret"></span></a><ul class="dropdown-menu"><li><a href="../files/app.coffee.html">app.coffee</a></li><li><a href="../files/errors.coffee.html">errors.coffee</a></li><li><a href="../files/events.coffee.html">events.coffee</a></li><li><a href="../files/index.coffee.html">index.coffee</a></li><li><a href="../files/logger.coffee.html">logger.coffee</a></li><li><a href="../files/settings.coffee.html">settings.coffee</a></li><li><a href="../files/utils.coffee.html">utils.coffee</a></li><li><a href="../files/aws.dynamodb.coffee.html">aws/dynamodb.coffee</a></li><li><a href="../files/aws.index.coffee.html">aws/index.coffee</a></li><li><a href="../files/aws.s3.coffee.html">aws/s3.coffee</a></li><li><a href="../files/aws.sns.coffee.html">aws/sns.coffee</a></li><li><a href="../files/cron.index.coffee.html">cron/index.coffee</a></li><li><a href="../files/cron.job.coffee.html">cron/job.coffee</a></li><li><a href="../files/gcloud.datastore.coffee.html">gcloud/datastore.coffee</a></li><li><a href="../files/gcloud.index.coffee.html">gcloud/index.coffee</a></li><li><a href="../files/gcloud.storage.coffee.html">gcloud/storage.coffee</a></li><li><a href="../files/logger-file.index.coffee.html">logger-file/index.coffee</a></li><li><a href="../files/logger-logentries.index.coffee.html">logger-logentries/index.coffee</a></li><li><a href="../files/logger-loggly.index.coffee.html">logger-loggly/index.coffee</a></li><li><a href="../files/mailer.index.coffee.html">mailer/index.coffee</a></li><li><a href="../files/mailer.templates.coffee.html">mailer/templates.coffee</a></li><li><a href="../files/metrics.httpserver.coffee.html">metrics/httpserver.coffee</a></li><li><a href="../files/metrics.index.coffee.html">metrics/index.coffee</a></li><li><a href="../files/metrics.percentile.coffee.html">metrics/percentile.coffee</a></li><li><a href="../files/mongodb.index.coffee.html">mongodb/index.coffee</a></li><li><a href="../files/sockets.index.coffee.html">sockets/index.coffee</a></li><li><a href="../files/utils.browser.coffee.html">utils/browser.coffee</a></li><li><a href="../files/utils.data.coffee.html">utils/data.coffee</a></li><li><a href="../files/utils.io.coffee.html">utils/io.coffee</a></li><li><a href="../files/utils.network.coffee.html">utils/network.coffee</a></li><li><a href="../files/utils.system.coffee.html">utils/system.coffee</a></li></ul></li></ul><div class="options"><label class="checkbox"><input id="options-private" type="checkbox"> Private</label></div></div></div></nav><div class="container-fluid content"><div class="row"><div class="hidden-xs sidebar col-sm-3" data-spy="affix"><div class="cormo-sidenav"><div class="panel panel-default"><div class="panel-collapse collapse in" id="undefined_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/App.html">App</a></li><li><a href="../classes/Errors.html">Errors</a></li><li><a href="../classes/Events.html">Events</a></li><li><a href="../classes/Expresser.html">Expresser</a></li><li><a href="../classes/Logger.html">Logger</a></li><li><a href="../classes/Settings.html">Settings</a></li><li><a href="../classes/Utils.html">Utils</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading" data-toggle="collapse" data-target="#aws_body">aws<span class="pull-right glyphicon"></span></div><div class="panel-collapse collapse in" id="aws_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/aws.AWS.html">AWS</a></li><li><a href="../classes/aws.DynamoDB.html">DynamoDB</a></li><li><a href="../classes/aws.S3.html">S3</a></li><li><a href="../classes/aws.SNS.html">SNS</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading" data-toggle="collapse" data-target="#cron_body">cron<span class="pull-right glyphicon"></span></div><div class="panel-collapse collapse in" id="cron_body"><ul class="nav nav-pills nav-stacked"><li class="active"><a href="#cron_Cron">Cron</a></li><li class="cormo-class-property"><a href="#cron_Cron__add">add</a></li><li class="cormo-class-property private"><a href="#cron_Cron__init">init<span class="pull-right label label-private">private</span></a></li><li class="cormo-class-property"><a href="#cron_Cron__load">load</a></li><li class="cormo-class-property"><a href="#cron_Cron__remove">remove</a></li><li class="cormo-class-property"><a href="#cron_Cron__start">start</a></li><li class="cormo-class-property"><a href="#cron_Cron__stop">stop</a></li><li class="cormo-class-property"><a href="#cron_Cron__jobs">jobs<span class="pull-right label label-property">property</span></a></li><li><a href="../classes/cron.CronJob.html">CronJob</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading" data-toggle="collapse" data-target="#gcloud_body">gcloud<span class="pull-right glyphicon"></span></div><div class="panel-collapse collapse in" id="gcloud_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/gcloud.GCloud.html">GCloud</a></li><li><a href="../classes/gcloud.GCloudDatastore.html">GCloudDatastore</a></li><li><a href="../classes/gcloud.GCloudStorage.html">GCloudStorage</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading" data-toggle="collapse" data-target="#logger-file_body">logger-file<span class="pull-right glyphicon"></span></div><div class="panel-collapse collapse in" id="logger-file_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/logger-file.LoggerFile.html">LoggerFile</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading" data-toggle="collapse" data-target="#logger-logentries_body">logger-logentries<span class="pull-right glyphicon"></span></div><div class="panel-collapse collapse in" id="logger-logentries_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/logger-logentries.LoggerLogentries.html">LoggerLogentries</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading" data-toggle="collapse" data-target="#logger-loggly_body">logger-loggly<span class="pull-right glyphicon"></span></div><div class="panel-collapse collapse in" id="logger-loggly_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/logger-loggly.LoggerLoggly.html">LoggerLoggly</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading" data-toggle="collapse" data-target="#mailer_body">mailer<span class="pull-right glyphicon"></span></div><div class="panel-collapse collapse in" id="mailer_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/mailer.EmailTemplates.html">EmailTemplates</a></li><li><a href="../classes/mailer.Mailer.html">Mailer</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading" data-toggle="collapse" data-target="#metrics_body">metrics<span class="pull-right glyphicon"></span></div><div class="panel-collapse collapse in" id="metrics_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/metrics.HttpServer.html">HttpServer</a></li><li><a href="../classes/metrics.Metrics.html">Metrics</a></li><li><a href="../classes/metrics.Percentile.html">Percentile</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading" data-toggle="collapse" data-target="#mongodb_body">mongodb<span class="pull-right glyphicon"></span></div><div class="panel-collapse collapse in" id="mongodb_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/mongodb.MongoDb.html">MongoDb</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading" data-toggle="collapse" data-target="#sockets_body">sockets<span class="pull-right glyphicon"></span></div><div class="panel-collapse collapse in" id="sockets_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/sockets.Sockets.html">Sockets</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading" data-toggle="collapse" data-target="#utils_body">utils<span class="pull-right glyphicon"></span></div><div class="panel-collapse collapse in" id="utils_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/utils.BrowserUtils.html">BrowserUtils</a></li><li><a href="../classes/utils.DataUtils.html">DataUtils</a></li><li><a href="../classes/utils.IOUtils.html">IOUtils</a></li><li><a href="../classes/utils.NetworkUtils.html">NetworkUtils</a></li><li><a href="../classes/utils.SystemUtils.html">SystemUtils</a></li></ul></div></div></div></div><div class="col-sm-9 col-sm-offset-3"><span class="fix-anchor" id="cron_Cron"></span><section><h1 class="class_title">Cron</h1><div><p>Simple implementation of scheduled cron jobs. You can use intervals or specific
times to trigger jobs, and the module will take care of setting the proper timers.</p>
</div><div></div><div class="showcode"><button class="btn btn-info">Show class code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//plugins/cron/index.coffee#L19">/plugins/cron/index.coffee:19</a>)</span></div><pre class="sourcecode prettyprint .linenums:19">class Cron
    priority: 3</pre><div class="panel panel-info"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#cron_Cron_ctor_body"><h3 class="panel-title">Constructor<span class="pull-right glyphicon"></span></h3></div><div class="panel-collapse collapse" id="cron_Cron_ctor_body"><div class="panel-body"><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table></div></div></div></section><span class="fix-anchor" id="cron_Cron__add"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#cron_Cron__add_body"><h3 class="panel-title">Cron::add(id, job, [Number,)<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Add a scheduled job to the cron, passing a <code>job</code>.
You can also pass only the <code>job</code> if it has an id property.</p>
</div></div><div class="panel-collapse collapse" id="cron_Cron__add_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>id</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> The job ID, optional, overrides job.id in case it has one.</span></td></tr><tr><td><span class="method-depth0"></span><code>job</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object'>Object</a></span></td><td><span> The job object.</span></td></tr><tr><td><span class="method-depth1"></span><code>id</code><span class="pull-right label label-optional">optional</span></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> The job ID, optional.</span></td></tr><tr><td><span class="method-depth1"></span><code>callback</code><span class="pull-right label label-optional">optional</span></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function'>Function</a>()</span></td><td><span> The callback (job) to be triggered.</span></td></tr><tr><td><span class="method-depth1"></span><code>once</code><span class="pull-right label label-optional">optional</span></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Boolean'>Boolean</a></span></td><td><span> If true, the job will be triggered only once no matter which schedule it has.</span></td></tr><tr><td><span class="method-depth0"></span><code>[Number,</code></td><td></td><td><span> Array] [job.schedule] If a number assume it's the interval in seconds, otherwise a times array.</span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td>(Returns)</td><td><span><a href='../classes/cron.CronJob.html#cron_CronJob'>CronJob</a></span></td><td><span>The job instance.</span></td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//plugins/cron/index.coffee#L208">/plugins/cron/index.coffee:208</a>)</span></div><pre class="sourcecode prettyprint .linenums:208">add: (job) =&gt;
    logger.debug &quot;Cron.add&quot;, job

    if not settings.cron.enabled
        return logger.notEnabled &quot;Cron&quot;

    # Throw error if no `id` was provided.
    if not job.id? or job.id is &quot;&quot;
        return errors.throw &quot;uniqueIdRequired&quot;, &quot;Please set job.id.&quot;

    # Throw error if job callback is not a valid function.
    if not lodash.isFunction job.callback
        return errors.throw &quot;callbackMustBeFunction&quot;, &quot;Please set job.callback.&quot;

    # Find existing job.
    existing = lodash.find @jobs, {id: job.id}

    # Handle existing jobs.
    if existing?
        if settings.cron.allowReplacing
            clearTimeout existing.timer if existing.timer?
            existing.timer = null
        else
            return errors.throw &quot;Job #{job.id} already exists and 'allowReplacing' is false.&quot;

    result = new jobModel this, job
    @jobs.push result

    # Auto starting the job is optional.
    @start result if job.autoStart

    return result</pre></div></div></div></section><span class="fix-anchor" id="cron_Cron__init"></span><section class="private"><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#cron_Cron__init_body"><h3 class="panel-title">Cron::init()<span class="label label-private">private</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Init the cron manager. If <code>loadOnInit</code> setting is true, the <code>cron.json</code>
file will be parsed and loaded straight away (if it exists).</p>
</div></div><div class="panel-collapse collapse" id="cron_Cron__init_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//plugins/cron/index.coffee#L37">/plugins/cron/index.coffee:37</a>)</span></div><pre class="sourcecode prettyprint .linenums:37">init: =&gt;
    errors = @expresser.errors
    events = @expresser.events
    lodash = @expresser.libs.lodash
    logger = @expresser.logger
    settings = @expresser.settings
    utils = @expresser.utils

    logger.debug &quot;Cron.init&quot;

    @load settings.cron.defaultFilename if settings.cron.loadOnInit

    events.emit &quot;Cron.on.init&quot;
    delete @init</pre></div></div></div></section><span class="fix-anchor" id="cron_Cron__load"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#cron_Cron__load_body"><h3 class="panel-title">Cron::load(filename, options, options, options, options)<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Load jobs from the specified (default cron.json) file.
If <code>autoStart</code> is true, it will automatically call the <code>start</code> method after loading.</p>
</div></div><div class="panel-collapse collapse" id="cron_Cron__load_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>filename</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> Path to the JSON file containing jobs, optional, default is "cron.json".</span></td></tr><tr><td><span class="method-depth0"></span><code>options</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object'>Object</a></span></td><td><span> Options to be passed when loading cron jobs.</span></td></tr><tr><td><span class="method-depth0"></span><code>options</code></td><td></td><td><span> {String} filename Name of file to be loaded (in case filename was not set on first parameter)</span></td></tr><tr><td><span class="method-depth0"></span><code>options</code></td><td></td><td><span> {String} basePath Sets the base path of modules when requiring them.</span></td></tr><tr><td><span class="method-depth0"></span><code>options</code></td><td></td><td><span> {Boolean} autoStart If true, call `start` after loading.</span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//plugins/cron/index.coffee#L61">/plugins/cron/index.coffee:61</a>)</span></div><pre class="sourcecode prettyprint .linenums:61">load: (filename, options) =&gt;
    logger.debug &quot;Cron.load&quot;, filename, options

    if not settings.cron.enabled
        return logger.notEnabled &quot;Cron&quot;

    # Set default options.
    options = filename if lodash.isObject filename
    options = lodash.defaults options, {autoStart: settings.cron.autoStart, basePath: settings.cron.basePath}

    # Make sure filename is set.
    filename = options.filename if not filename?

    # Get full path to the passed json file.
    filepath = utils.io.getFilePath filename

    # Found the cron json file? Read it.
    if filepath?
        basename = path.basename filepath
        cronJson = &quot;&quot;

        try
            cronJson = fs.readFileSync filepath, {encoding: settings.general.encoding}
            cronJson = utils.data.minifyJson cronJson
        catch ex
            ex.details = &quot;Could not parse #{filepath} as JSON.&quot;
            logger.error &quot;Cron.load&quot;, ex
            return errors.throw &quot;invalidJson&quot;, ex

        # Iterate jobs, but do not add if job's `enabled` is false.
        for key, data of cronJson
            module = require(path.dirname(require.main.filename) + &quot;/&quot; + options.basePath + key)

            for d in data
                if not d.enabled? or d.enabled
                    logger.debug &quot;Cron.load&quot;, filename, d

                    jobOptions = {
                        id: d.id or key + &quot;.&quot; + d.callback
                        callback: module[d.callback]
                        filename: filename
                        module: key
                        autoStart: options.autoStart
                    }

                    job = lodash.assign d, jobOptions
                    @add job
                else
                    logger.warn &quot;Cron.load&quot;, filename, key, d.callback, &quot;Job 'enabled' is false. Skip!&quot;

        logger.info &quot;Cron.load&quot;, &quot;#{basename} loaded.&quot;, options
        events.emit &quot;Cron.on.load&quot;, filename, options
    else
        err = &quot;Cron file #{filename} not found.&quot;
        logger.error &quot;Cron.load&quot;, err
        throw {error: &quot;Not found&quot;, message: &quot;Could not load cron file #{filename}.&quot;}</pre></div></div></div></section><span class="fix-anchor" id="cron_Cron__remove"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#cron_Cron__remove_body"><h3 class="panel-title">Cron::remove(id)<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Remove and stop a current job. If job does not exist, a warning will be logged.</p>
</div></div><div class="panel-collapse collapse" id="cron_Cron__remove_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>id</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> The job ID.</span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td>(Returns)</td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Boolean'>Boolean</a></span></td><td><span>True if job removed, false if error or job does not exist.</span></td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//plugins/cron/index.coffee#L246">/plugins/cron/index.coffee:246</a>)</span></div><pre class="sourcecode prettyprint .linenums:246">remove: (id) =&gt;
    existing = lodash.find @jobs, {id: id}

    # Job exists?
    if not existing?
        logger.warn &quot;Cron.remove&quot;, &quot;Job #{id} does not exist.&quot;
        return false

    # Clear timer and remove job from array.
    clearTimeout existing.timer if existing.timer?
    existing.timer = null

    @jobs.splice existing

    return true</pre></div></div></div></section><span class="fix-anchor" id="cron_Cron__start"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#cron_Cron__start_body"><h3 class="panel-title">Cron::start(obj)<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Start the specified cron job. If no <code>id</code> is specified, all jobs will be started.
A filter can also be passed as an object. For example to start all jobs for
the module &quot;email&quot;, use start({module: &quot;email&quot;}).</p>
</div></div><div class="panel-collapse collapse" id="cron_Cron__start_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>obj</code></td><td><span><a href='../classes/cron.CronJob.html#cron_CronJob'>CronJob</a>, <a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a>, <a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object'>Object</a></span></td><td><span> The job object, id or filter, optional (if not specified, start everything).</span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//plugins/cron/index.coffee#L127">/plugins/cron/index.coffee:127</a>)</span></div><pre class="sourcecode prettyprint .linenums:127">start: (filter) =&gt;
    logger.debug &quot;Cron.start&quot;, filter

    if not settings.cron.enabled
        return logger.notEnabled &quot;Cron&quot;

    if not filter?
        logger.info &quot;Cron.start&quot;, &quot;All jobs&quot;
        arr = @jobs

    # Passing the job directly?
    else if filter.constructor?.name is &quot;CronJob&quot;
        arr = [filter]

    # Passing the job ID (string or number)?
    else if lodash.isString filter or lodash.isNumber filter
        logger.info &quot;Cron.start&quot;, filter
        arr = lodash.find @jobs, {id: filter.toString()}

    # Passing an object with key / value pairs to filter jobs?
    else
        logger.info &quot;Cron.start&quot;, filter
        arr = lodash.find @jobs, filter

    if not arr? or arr.length &lt; 1
        filterString = filter
        filterString = JSON.stringify filterString, null, 0 if lodash.isObject filterString
        logger.warn &quot;Cron.start&quot;, &quot;No jobs matching #{filterString}.&quot;
        return {notFound: true}
    else
        for job in arr
            job.start()
            logger.info &quot;Cron.start&quot;, &quot;Started job&quot;, job.id</pre></div></div></div></section><span class="fix-anchor" id="cron_Cron__stop"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#cron_Cron__stop_body"><h3 class="panel-title">Cron::stop(filter)<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Stop the specified cron job. If no <code>id</code> is specified, all jobs will be stopped.
A filter can also be passed as an object. For example to stop all jobs for
the module &quot;mymodule&quot;, use stop({module: &quot;mymodule&quot;}).</p>
</div></div><div class="panel-collapse collapse" id="cron_Cron__stop_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>filter</code></td><td><span><a href='../classes/cron.CronJob.html#cron_CronJob'>CronJob</a>, <a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a>, <a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object'>Object</a></span></td><td><span> The job object, id or filter, optional (if not specified, stop everything).</span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//plugins/cron/index.coffee#L167">/plugins/cron/index.coffee:167</a>)</span></div><pre class="sourcecode prettyprint .linenums:167">stop: (filter) =&gt;
    logger.debug &quot;Cron.stop&quot;, filter

    if not filter?
        logger.info &quot;Cron.stop&quot;, &quot;All jobs&quot;
        arr = @jobs

    # Passing the job directly?
    else if filter.constructor?.name is &quot;CronJob&quot;
        arr = [filter]

    # Passing the job ID (string or number)?
    else if lodash.isString filter or lodash.isNumber filter
        arr = lodash.find @jobs, {id: filter.toString()}

    # Passing an object with key / value pairs to filter jobs?
    else
        logger.info &quot;Cron.stop&quot;, filter
        arr = lodash.find @jobs, filter

    if not arr? or arr.length &lt; 1
        filterString = filter
        filterString = JSON.stringify filterString, null, 0 if lodash.isObject filterString
        logger.warn &quot;Cron.stop&quot;, &quot;No jobs matching #{filterString}.&quot;
        return {notFound: true}
    else
        for job in arr
            job.stop()
            logger.info &quot;Cron.start&quot;, &quot;Stopped job&quot;, job.id</pre></div></div></div></section><span class="fix-anchor" id="cron_Cron__jobs"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#cron_Cron__jobs_body"><h3 class="panel-title">Cron::jobs : <a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array'>Array</a><span class="label label-property">property</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>The jobs collection, this should be managed automatically  but it&#39;s exposed
to external modules just in case you need to do something unusual.</p>
</div></div><div class="panel-collapse collapse" id="cron_Cron__jobs_body"><div class="panel-body"><div></div><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//plugins/cron/index.coffee#L27">/plugins/cron/index.coffee:27</a>)</span></div><pre class="sourcecode prettyprint .linenums:27">jobs: []</pre></div></div></div></section></div></div></div><script src="https://code.jquery.com/jquery-3.2.1.min.js"></script><script src="../bootstrap/js/bootstrap.min.js"></script><script src="../google-code-prettify/prettify.js"></script><script src="../script.js"></script><script src="../group-examples.js"></script><a href="https://github.com/igoramadas/expresser"><img class="github-ribbon" src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png" alt="Fork me on GitHub"></a></body></html>