<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Expresser - Logger</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-9331973-3"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-9331973-3');
</script><script>if (location.protocol.match(/^http/) && location.pathname.match('\.html') === null && location.pathname.slice(-1) !== '/') {
  location.href = location.href + '/';
}</script><link href="../bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script><script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]--><link href="../google-code-prettify/prettify.css" rel="stylesheet" type="text/css"><link href="../style.css" rel="stylesheet" type="text/css"></head><body data-spy="scroll" data-target=".sidebar"><nav class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#top-navigation-collapse"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div class="collapse navbar-collapse" id="top-navigation-collapse"><ul class="nav navbar-nav"><li><a href="../index.html">Home</a></li><li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Guides <span class="caret"></span></a><ul class="dropdown-menu"><li><a href="../guides/App.html">App</a></li><li><a href="../guides/Errors.html">Errors</a></li><li><a href="../guides/Events.html">Events</a></li><li><a href="../guides/Logger.html">Logger</a></li><li><a href="../guides/Settings.html">Settings</a></li><li><a href="../guides/Utils.html">Utils</a></li></ul></li><li class="active"><a href="../classes/index.html">Classes - Logger</a></li><li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Files <span class="caret"></span></a><ul class="dropdown-menu"><li><a href="../files/app.coffee.html">app.coffee</a></li><li><a href="../files/errors.coffee.html">errors.coffee</a></li><li><a href="../files/events.coffee.html">events.coffee</a></li><li><a href="../files/index.coffee.html">index.coffee</a></li><li><a href="../files/logger.coffee.html">logger.coffee</a></li><li><a href="../files/settings.coffee.html">settings.coffee</a></li><li><a href="../files/utils.coffee.html">utils.coffee</a></li><li><a href="../files/aws.dynamodb.coffee.html">aws/dynamodb.coffee</a></li><li><a href="../files/aws.index.coffee.html">aws/index.coffee</a></li><li><a href="../files/aws.s3.coffee.html">aws/s3.coffee</a></li><li><a href="../files/aws.sns.coffee.html">aws/sns.coffee</a></li><li><a href="../files/cron.index.coffee.html">cron/index.coffee</a></li><li><a href="../files/cron.job.coffee.html">cron/job.coffee</a></li><li><a href="../files/gcloud.datastore.coffee.html">gcloud/datastore.coffee</a></li><li><a href="../files/gcloud.index.coffee.html">gcloud/index.coffee</a></li><li><a href="../files/gcloud.storage.coffee.html">gcloud/storage.coffee</a></li><li><a href="../files/logger-file.index.coffee.html">logger-file/index.coffee</a></li><li><a href="../files/logger-logentries.index.coffee.html">logger-logentries/index.coffee</a></li><li><a href="../files/logger-loggly.index.coffee.html">logger-loggly/index.coffee</a></li><li><a href="../files/mailer.index.coffee.html">mailer/index.coffee</a></li><li><a href="../files/mailer.templates.coffee.html">mailer/templates.coffee</a></li><li><a href="../files/metrics.httpserver.coffee.html">metrics/httpserver.coffee</a></li><li><a href="../files/metrics.index.coffee.html">metrics/index.coffee</a></li><li><a href="../files/metrics.percentile.coffee.html">metrics/percentile.coffee</a></li><li><a href="../files/mongodb.index.coffee.html">mongodb/index.coffee</a></li><li><a href="../files/sockets.index.coffee.html">sockets/index.coffee</a></li><li><a href="../files/utils.browser.coffee.html">utils/browser.coffee</a></li><li><a href="../files/utils.data.coffee.html">utils/data.coffee</a></li><li><a href="../files/utils.io.coffee.html">utils/io.coffee</a></li><li><a href="../files/utils.network.coffee.html">utils/network.coffee</a></li><li><a href="../files/utils.system.coffee.html">utils/system.coffee</a></li></ul></li></ul><div class="options"><label class="checkbox"><input id="options-private" type="checkbox"> Private</label></div></div></div></nav><div class="container-fluid content"><div class="row"><div class="hidden-xs sidebar col-sm-3" data-spy="affix"><div class="cormo-sidenav"><div class="panel panel-default"><div class="panel-collapse collapse in" id="undefined_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/App.html">App</a></li><li><a href="../classes/Errors.html">Errors</a></li><li><a href="../classes/Events.html">Events</a></li><li><a href="../classes/Expresser.html">Expresser</a></li><li class="active"><a href="#Logger">Logger</a></li><li class="cormo-class-property private"><a href="#Logger__argsCleaner">argsCleaner<span class="pull-right label label-private">private</span></a></li><li class="cormo-class-property"><a href="#Logger__console">console</a></li><li class="cormo-class-property"><a href="#Logger__critical">critical</a></li><li class="cormo-class-property"><a href="#Logger__debug">debug</a></li><li class="cormo-class-property"><a href="#Logger__deprecated">deprecated</a></li><li class="cormo-class-property"><a href="#Logger__error">error</a></li><li class="cormo-class-property private"><a href="#Logger__getMessage">getMessage<span class="pull-right label label-private">private</span></a></li><li class="cormo-class-property"><a href="#Logger__info">info</a></li><li class="cormo-class-property"><a href="#Logger__init">init</a></li><li class="cormo-class-property"><a href="#Logger__log">log</a></li><li class="cormo-class-property"><a href="#Logger__notEnabled">notEnabled</a></li><li class="cormo-class-property"><a href="#Logger__register">register</a></li><li class="cormo-class-property"><a href="#Logger__unregister">unregister</a></li><li class="cormo-class-property"><a href="#Logger__warn">warn</a></li><li class="cormo-class-property"><a href="#Logger__drivers">drivers<span class="pull-right label label-property">property</span></a></li><li class="cormo-class-property"><a href="#Logger__onLog">onLog<span class="pull-right label label-property">property</span></a></li><li class="cormo-class-property"><a href="#Logger__transports">transports<span class="pull-right label label-property">property</span></a></li><li><a href="../classes/Settings.html">Settings</a></li><li><a href="../classes/Utils.html">Utils</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading" data-toggle="collapse" data-target="#aws_body">aws<span class="pull-right glyphicon"></span></div><div class="panel-collapse collapse in" id="aws_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/aws.AWS.html">AWS</a></li><li><a href="../classes/aws.DynamoDB.html">DynamoDB</a></li><li><a href="../classes/aws.S3.html">S3</a></li><li><a href="../classes/aws.SNS.html">SNS</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading" data-toggle="collapse" data-target="#cron_body">cron<span class="pull-right glyphicon"></span></div><div class="panel-collapse collapse in" id="cron_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/cron.Cron.html">Cron</a></li><li><a href="../classes/cron.CronJob.html">CronJob</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading" data-toggle="collapse" data-target="#gcloud_body">gcloud<span class="pull-right glyphicon"></span></div><div class="panel-collapse collapse in" id="gcloud_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/gcloud.GCloud.html">GCloud</a></li><li><a href="../classes/gcloud.GCloudDatastore.html">GCloudDatastore</a></li><li><a href="../classes/gcloud.GCloudStorage.html">GCloudStorage</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading" data-toggle="collapse" data-target="#logger-file_body">logger-file<span class="pull-right glyphicon"></span></div><div class="panel-collapse collapse in" id="logger-file_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/logger-file.LoggerFile.html">LoggerFile</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading" data-toggle="collapse" data-target="#logger-logentries_body">logger-logentries<span class="pull-right glyphicon"></span></div><div class="panel-collapse collapse in" id="logger-logentries_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/logger-logentries.LoggerLogentries.html">LoggerLogentries</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading" data-toggle="collapse" data-target="#logger-loggly_body">logger-loggly<span class="pull-right glyphicon"></span></div><div class="panel-collapse collapse in" id="logger-loggly_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/logger-loggly.LoggerLoggly.html">LoggerLoggly</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading" data-toggle="collapse" data-target="#mailer_body">mailer<span class="pull-right glyphicon"></span></div><div class="panel-collapse collapse in" id="mailer_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/mailer.EmailTemplates.html">EmailTemplates</a></li><li><a href="../classes/mailer.Mailer.html">Mailer</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading" data-toggle="collapse" data-target="#metrics_body">metrics<span class="pull-right glyphicon"></span></div><div class="panel-collapse collapse in" id="metrics_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/metrics.HttpServer.html">HttpServer</a></li><li><a href="../classes/metrics.Metrics.html">Metrics</a></li><li><a href="../classes/metrics.Percentile.html">Percentile</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading" data-toggle="collapse" data-target="#mongodb_body">mongodb<span class="pull-right glyphicon"></span></div><div class="panel-collapse collapse in" id="mongodb_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/mongodb.MongoDb.html">MongoDb</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading" data-toggle="collapse" data-target="#sockets_body">sockets<span class="pull-right glyphicon"></span></div><div class="panel-collapse collapse in" id="sockets_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/sockets.Sockets.html">Sockets</a></li></ul></div></div><div class="panel panel-default"><div class="panel-heading" data-toggle="collapse" data-target="#utils_body">utils<span class="pull-right glyphicon"></span></div><div class="panel-collapse collapse in" id="utils_body"><ul class="nav nav-pills nav-stacked"><li><a href="../classes/utils.BrowserUtils.html">BrowserUtils</a></li><li><a href="../classes/utils.DataUtils.html">DataUtils</a></li><li><a href="../classes/utils.IOUtils.html">IOUtils</a></li><li><a href="../classes/utils.NetworkUtils.html">NetworkUtils</a></li><li><a href="../classes/utils.SystemUtils.html">SystemUtils</a></li></ul></div></div></div></div><div class="col-sm-9 col-sm-offset-3"><span class="fix-anchor" id="Logger"></span><section><h1 class="class_title">Logger</h1><div><p>Handles server logging using the console, local files, Logentries, Loggly and
other transports available as plugins. Multiple transports can be enabled at
the same time.</p>
</div><div></div><div class="showcode"><button class="btn btn-info">Show class code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//lib/logger.coffee#L17">/lib/logger.coffee:17</a>)</span></div><pre class="sourcecode prettyprint .linenums:17">class Logger
    newInstance: -&gt; return new Logger()</pre><div class="panel panel-info"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#Logger_ctor_body"><h3 class="panel-title">Constructor<span class="pull-right glyphicon"></span></h3></div><div class="panel-collapse collapse" id="Logger_ctor_body"><div class="panel-body"><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table></div></div></div></section><span class="fix-anchor" id="Logger__argsCleaner"></span><section class="private"><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#Logger__argsCleaner_body"><h3 class="panel-title">Logger::argsCleaner()<span class="label label-private">private</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Process and clean arguments according to the <code>removeFields</code>, <code>maskFields</code>
and <code>obfuscateFields</code> settings. The maximum level deep down the object
is defined by the <code>maxDepth</code> setting.</p>
</div></div><div class="panel-collapse collapse" id="Logger__argsCleaner_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td>(Returns)</td><td><span><a href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments'>Arguments</a></span></td><td><span>Arguments with masked, hidden and obfuscated fields processed.</span></td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//lib/logger.coffee#L254">/lib/logger.coffee:254</a>)</span></div><pre class="sourcecode prettyprint .linenums:254">argsCleaner: -&gt;
    funcText = &quot;[Function]&quot;
    unreadableText = &quot;[Unreadable]&quot;
    max = settings.logger.maxDepth - 1
    result = []

    # Recursive cleaning function.
    cleaner = (obj, index) -&gt;
        i = 0

        if lodash.isArray obj
            while i &lt; obj.length
                if index &gt; max
                    obj[i] = &quot;...&quot;
                else if lodash.isFunction obj[i]
                    obj[i] = funcText
                else
                    cleaner obj[i], index + 1
                i++

        else if lodash.isObject obj
            for key, value of obj
                try
                    if index &gt; max
                        obj[key] = &quot;...&quot;
                    else if settings.logger.obfuscateFields?.indexOf(key) &gt;=0
                        obj[key] = &quot;***&quot;
                    else if settings.logger.maskFields?[key]?
                        if lodash.isObject value
                            maskedValue = value.value or value.text or value.contents or value.data or &quot;&quot;
                        else
                            maskedValue = value.toString()
                        obj[key] = utils.data.maskString maskedValue, &quot;*&quot;, settings.logger.maskFields[key]
                    else if settings.logger.removeFields?.indexOf(key) &gt;=0
                        delete obj[key]
                    else if lodash.isArray value
                        while i &lt; value.length
                            cleaner value[i], index + 1
                            i++
                    else if lodash.isFunction value
                        obj[key] = funcText
                    else if lodash.isObject value
                        cleaner value, index + 1
                catch ex
                    delete obj[key]
                    obj[key] = unreadableText

    # Iterate arguments and execute cleaner on objects.
    for argKey, arg of arguments
        try
            if lodash.isArray arg
                for a in arg
                    if lodash.isError a
                        result.push a
                    else if lodash.isObject a
                        cloned = lodash.cloneDeep a
                        cleaner cloned, 0
                        result.push cloned
                    else if lodash.isFunction a
                        result.push funcText
                    else
                        result.push a
            else
                cloned = lodash.cloneDeep arg
                cleaner cloned, 0
                result.push cloned

        catch ex
            console.warn &quot;Logger.argsCleaner&quot;, argKey, ex

    return result</pre></div></div></div></section><span class="fix-anchor" id="Logger__console"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#Logger__console_body"><h3 class="panel-title">Logger::console(logType, msg, doNotParse)<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Log to the console.</p>
</div></div><div class="panel-collapse collapse" id="Logger__console_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>logType</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> The log type (ex: warning, error, info, etc).</span></td></tr><tr><td><span class="method-depth0"></span><code>msg</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> The message to be logged, mandatory.</span></td></tr><tr><td><span class="method-depth0"></span><code>doNotParse</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Boolean'>Boolean</a></span></td><td><span> If true, message won't be cleaned using the `argsCleaner` helper.</span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td>(Returns)</td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span>The human readable log sent to the console.</span></td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//lib/logger.coffee#L112">/lib/logger.coffee:112</a>)</span></div><pre class="sourcecode prettyprint .linenums:112">console: (logType, msg, doNotParse = false) -&gt;
    return if process.env.NODE_ENV is &quot;test&quot; and logType isnt &quot;test&quot;

    timestamp = moment().format &quot;HH:mm:ss.SS&quot;

    # Only parse message if doNotClean is false or unset.
    msg = @getMessage msg if not doNotParse

    if console[logType]? and logType isnt &quot;debug&quot;
        method = console[logType]
    else
        method = console.log

    # Get styles (text colour, bold, italic etc...) for the correlated log type.
    styles = settings.logger.styles[logType]

    if styles?
        chalkStyle = chalk
        chalkStyle = chalkStyle[s] for s in styles
    else
        chalkStyle = chalk.white

    method timestamp, chalkStyle msg

    return msg</pre></div></div></div></section><span class="fix-anchor" id="Logger__critical"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#Logger__critical_body"><h3 class="panel-title">Logger::critical(args)<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Log to the active transports as <code>critical</code>.</p>
</div></div><div class="panel-collapse collapse" id="Logger__critical_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>args</code></td><td><span><a href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments'>Arguments</a></span></td><td><span> Any number of arguments to be parsed and stringified.</span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//lib/logger.coffee#L211">/lib/logger.coffee:211</a>)</span></div><pre class="sourcecode prettyprint .linenums:211">critical: -&gt;
    args = Array.prototype.slice.call arguments
    args.unshift &quot;CRITICAL&quot;
    msg = @log &quot;critical&quot;, args
    events.emit &quot;Logger.on.critical&quot;, msg
    return msg</pre></div></div></div></section><span class="fix-anchor" id="Logger__debug"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#Logger__debug_body"><h3 class="panel-title">Logger::debug(args)<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Log to the active transports as <code>debug</code>, only if <code>settings.general.debug</code> is true.</p>
</div></div><div class="panel-collapse collapse" id="Logger__debug_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>args</code></td><td><span><a href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments'>Arguments</a></span></td><td><span> Any number of arguments to be parsed and stringified.</span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//lib/logger.coffee#L168">/lib/logger.coffee:168</a>)</span></div><pre class="sourcecode prettyprint .linenums:168">debug: -&gt;
    args = Array.prototype.slice.call arguments
    args.unshift &quot;DEBUG&quot;
    msg = @log &quot;debug&quot;, args
    return msg</pre></div></div></div></section><span class="fix-anchor" id="Logger__deprecated"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#Logger__deprecated_body"><h3 class="panel-title">Logger::deprecated(feature, message)<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Helper to log to console about deprecated features.</p>
</div></div><div class="panel-collapse collapse" id="Logger__deprecated_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>feature</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> Module, function or feature that is deprecated, mandatory.</span></td></tr><tr><td><span class="method-depth0"></span><code>message</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> Optional message to add to the console.</span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td>(Returns)</td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object'>Object</a></span></td><td><span>Object on the format {error: 'Feature not enabled', notEnabled: true, message: '...'}</span></td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//lib/logger.coffee#L227">/lib/logger.coffee:227</a>)</span></div><pre class="sourcecode prettyprint .linenums:227">deprecated: (feature, message) =&gt;
    line = &quot;#{feature} is deprecated. #{message}&quot;
    @console &quot;deprecated&quot;, line
    result = {error: &quot;#{feature} is deprecated.&quot;, deprecated: true}
    result.message = message if message? and message isnt &quot;&quot;
    return result</pre></div></div></div></section><span class="fix-anchor" id="Logger__error"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#Logger__error_body"><h3 class="panel-title">Logger::error(args)<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Log to the active transports as <code>error</code>.</p>
</div></div><div class="panel-collapse collapse" id="Logger__error_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>args</code></td><td><span><a href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments'>Arguments</a></span></td><td><span> Any number of arguments to be parsed and stringified.</span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//lib/logger.coffee#L200">/lib/logger.coffee:200</a>)</span></div><pre class="sourcecode prettyprint .linenums:200">error: -&gt;
    args = Array.prototype.slice.call arguments
    args.unshift &quot;ERROR&quot;
    msg = @log &quot;error&quot;, args
    events.emit &quot;Logger.on.error&quot;, msg
    return msg</pre></div></div></div></section><span class="fix-anchor" id="Logger__getMessage"></span><section class="private"><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#Logger__getMessage_body"><h3 class="panel-title">Logger::getMessage(params)<span class="label label-private">private</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Parses arguments and returns a human readable message to be used for logging.</p>
</div></div><div class="panel-collapse collapse" id="Logger__getMessage_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>params</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array'>Array</a></span></td><td><span> Arguments or array of parameters to be parsed.</span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td>(Returns)</td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span>The human readable, parsed JSON message.</span></td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//lib/logger.coffee#L332">/lib/logger.coffee:332</a>)</span></div><pre class="sourcecode prettyprint .linenums:332">getMessage: (params) -&gt;
    separator = settings.logger.separator
    separated = []
    args = []

    if arguments.length &gt; 1
        args.push value for value in arguments
    else if lodash.isArray params
        args.push value for value in params
    else
        args.push params

    args = @argsCleaner args

    # Parse all arguments and stringify objects. Please note that fields defined
    # on the `removeFields` setting won't be added to the message.
    for arg in args
        if arg?
            stringified = &quot;&quot;

            try
                if lodash.isArray arg
                    for value in arg
                        stringified += JSON.stringify value, null, 2
                else if lodash.isError arg
                    arrError = []
                    arrError.push arg.friendlyMessage if arg.friendlyMessage?
                    arrError.push arg.reason if arg.reason?
                    arrError.push arg.code if arg.code?
                    arrError.push arg.message
                    arrError.push arg.stack
                    stringified = arrError.join separator
                else if lodash.isObject arg
                    stringified = JSON.stringify arg, null, 2
                else
                    stringified = arg.toString()
            catch ex
                stringified = arg.toString()

            # Compact log lines?
            if settings.logger.compact
                stringified = stringified.replace(/(\r\n|\n|\r)/gm, &quot;&quot;).replace(/  +/g, &quot; &quot;);

            separated.push stringified

    # Append IP address, if `serverIP` is set.
    if settings.logger.sendIP
        try
            serverIP = utils.network.getSingleIPv4() or utils.network.getSingleIPv6()
            serverIP = null if serverIP is &quot;&quot;
        catch ex
            serverIP = null

    separated.push &quot;IP #{serverIP}&quot; if serverIP?

    # Return single string log message.
    return separated.join separator</pre></div></div></div></section><span class="fix-anchor" id="Logger__info"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#Logger__info_body"><h3 class="panel-title">Logger::info(args)<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Log to the active transports as <code>info</code>.</p>
</div></div><div class="panel-collapse collapse" id="Logger__info_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>args</code></td><td><span><a href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments'>Arguments</a></span></td><td><span> Any number of arguments to be parsed and stringified.</span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//lib/logger.coffee#L178">/lib/logger.coffee:178</a>)</span></div><pre class="sourcecode prettyprint .linenums:178">info: -&gt;
    args = Array.prototype.slice.call arguments
    args.unshift &quot;INFO&quot;
    msg = @log &quot;info&quot;, args
    events.emit &quot;Logger.on.info&quot;, msg
    return msg</pre></div></div></div></section><span class="fix-anchor" id="Logger__init"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#Logger__init_body"><h3 class="panel-title">Logger::init()<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Init the Logger module and set default settings.</p>
</div></div><div class="panel-collapse collapse" id="Logger__init_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(None)</td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//lib/logger.coffee#L44">/lib/logger.coffee:44</a>)</span></div><pre class="sourcecode prettyprint .linenums:44">init: =&gt;
    events.emit &quot;Logger.before.init&quot;

    if settings.logger.uncaughtException
        @debug &quot;Logger.init&quot;, &quot;Catching unhandled exceptions.&quot;

        process.on &quot;uncaughtException&quot;, (err) =&gt;
            try
                @error &quot;Unhandled exception!&quot;, err.message, err.stack
            catch ex
                console.error &quot;Unhandled exception!&quot;, err.message, err.stack, ex

    # DEPRECATED! Use settings.logger.maxDepth instead of maxDeepLevel.
    if settings.logger.maxDeepLevel?
        @deprecated &quot;settings.logger.maxDeepLevel&quot;, &quot;Please use settings.logger.maxDepth instead.&quot;
        settings.logger.maxDepth = settings.logger.maxDeepLevel

    events.emit &quot;Logger.on.init&quot;
    delete @init</pre></div></div></div></section><span class="fix-anchor" id="Logger__log"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#Logger__log_body"><h3 class="panel-title">Logger::log(logType, args)<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Generic log method. You can use this if you want to have your own customized log types
instead of the more traditional debug / info / warning / error ...</p>
</div></div><div class="panel-collapse collapse" id="Logger__log_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>logType</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> The log type (for example: info, error, myCustomType etc).</span></td></tr><tr><td><span class="method-depth0"></span><code>args</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array'>Array</a></span></td><td><span> Array to be stringified and logged, mandatory.</span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td>(Returns)</td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span>The parsed, stringified log message.</span></td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//lib/logger.coffee#L145">/lib/logger.coffee:145</a>)</span></div><pre class="sourcecode prettyprint .linenums:145">log: (logType, args) -&gt;
    return if settings.logger.levels?.indexOf(logType) &lt; 0 and not settings.general.debug

    # Get message out of the arguments.
    msg = @getMessage args

    # Dispatch to all registered transports.
    for key, obj of @transports
        obj.log logType, msg, true

    # Log to the console depending on `console` setting.
    if settings.logger.console
        @console logType, msg, true

    # Custom onLog callback?
    @onLog? logType, args

    return msg</pre></div></div></div></section><span class="fix-anchor" id="Logger__notEnabled"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#Logger__notEnabled_body"><h3 class="panel-title">Logger::notEnabled(feature, message)<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Helper to log to console about features not enabled.</p>
</div></div><div class="panel-collapse collapse" id="Logger__notEnabled_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>feature</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> Module, function or feature that is deprecated, mandatory.</span></td></tr><tr><td><span class="method-depth0"></span><code>message</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> Optional message to add to the console.</span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td>(Returns)</td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object'>Object</a></span></td><td><span>Object on the format {error: 'Feature not enabled', notEnabled: true, message: '...'}</span></td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//lib/logger.coffee#L240">/lib/logger.coffee:240</a>)</span></div><pre class="sourcecode prettyprint .linenums:240">notEnabled: (feature, message) =&gt;
    line = &quot;#{feature} is not enabled. #{message}&quot;
    @console &quot;warn&quot;, line
    result = {error: &quot;#{feature} is not enabled.&quot;, notEnabled: true}
    result.message = message if message? and message isnt &quot;&quot;
    return result</pre></div></div></div></section><span class="fix-anchor" id="Logger__register"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#Logger__register_body"><h3 class="panel-title">Logger::register(id, driver, options)<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Register a Logger transport.</p>
</div></div><div class="panel-collapse collapse" id="Logger__register_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>id</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> Unique ID of the transport to be registered, mandatory.</span></td></tr><tr><td><span class="method-depth0"></span><code>driver</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> The transport driver ID (logger, loggly, etc), mandatory.</span></td></tr><tr><td><span class="method-depth0"></span><code>options</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object'>Object</a></span></td><td><span> Registration options to be passed to the transport handler.</span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//lib/logger.coffee#L73">/lib/logger.coffee:73</a>)</span></div><pre class="sourcecode prettyprint .linenums:73">register: (id, driver, options) -&gt;
    if not @drivers[driver]?
        console.error &quot;Logger.register&quot;, &quot;#{driver} is not installed! Please check if plugin expresser-logger-#{driver} is available on the current environment.&quot;
        return false
    else
        if settings.general.debug
            console.log &quot;Logger.register&quot;, id, driver, options

        @transports[id] = @drivers[driver].getTransport options
        @transports[id].log = @drivers[driver].log
        @transports[id].debug = @debug
        @transports[id].info = @info
        @transports[id].warn = @warn
        @transports[id].error = @error
        @transports[id].critical = @critical

        return @transports[id]</pre></div></div></div></section><span class="fix-anchor" id="Logger__unregister"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#Logger__unregister_body"><h3 class="panel-title">Logger::unregister(id)<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Unregister a Logger transport.</p>
</div></div><div class="panel-collapse collapse" id="Logger__unregister_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>id</code></td><td><span><a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String'>String</a></span></td><td><span> Unique ID of the transport to be unregistered.</span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//lib/logger.coffee#L95">/lib/logger.coffee:95</a>)</span></div><pre class="sourcecode prettyprint .linenums:95">unregister: (id) =&gt;
    @transports[id]?.unregister?()
    delete @transports[id]

    if settings.general.debug
        console.log &quot;Logger.unregister&quot;, id</pre></div></div></div></section><span class="fix-anchor" id="Logger__warn"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#Logger__warn_body"><h3 class="panel-title">Logger::warn(args)<span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Log to the active transports as <code>warn</code>.</p>
</div></div><div class="panel-collapse collapse" id="Logger__warn_body"><div class="panel-body"><div></div><h4>Parameters</h4><table class="table table-bordered table-condensed table-hover"><tr><th>Name</th><th>Type</th><th>Description</th></tr><tr><td><span class="method-depth0"></span><code>args</code></td><td><span><a href='https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments'>Arguments</a></span></td><td><span> Any number of arguments to be parsed and stringified.</span></td></tr></table><h4>Returns</h4><table class="table table-bordered table-condensed table-hover"><tr><td>(Nothing)</td></tr></table><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//lib/logger.coffee#L189">/lib/logger.coffee:189</a>)</span></div><pre class="sourcecode prettyprint .linenums:189">warn: -&gt;
    args = Array.prototype.slice.call arguments
    args.unshift &quot;WARN&quot;
    msg = @log &quot;warn&quot;, args
    events.emit &quot;Logger.on.warn&quot;, msg
    return msg</pre></div></div></div></section><span class="fix-anchor" id="Logger__drivers"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#Logger__drivers_body"><h3 class="panel-title">Logger::drivers : <a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object'>Object</a><span class="label label-property">property</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>List of available logging drivers. This list will be populated automatically by installed plugins.</p>
</div></div><div class="panel-collapse collapse" id="Logger__drivers_body"><div class="panel-body"><div></div><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//lib/logger.coffee#L24">/lib/logger.coffee:24</a>)</span></div><pre class="sourcecode prettyprint .linenums:24">drivers: {}</pre></div></div></div></section><span class="fix-anchor" id="Logger__onLog"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#Logger__onLog_body"><h3 class="panel-title">Logger::onLog : <a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function'>Function</a><span class="label label-property">property</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>Method to call on every log request.</p>
</div></div><div class="panel-collapse collapse" id="Logger__onLog_body"><div class="panel-body"><div></div><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//lib/logger.coffee#L36">/lib/logger.coffee:36</a>)</span></div><pre class="sourcecode prettyprint .linenums:36">onLog: null</pre></div></div></div></section><span class="fix-anchor" id="Logger__transports"></span><section><div class="panel panel-success"><div class="panel-heading collapsed" data-toggle="collapse" data-target="#Logger__transports_body"><h3 class="panel-title">Logger::transports : <a href='https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object'>Object</a><span class="label label-property">property</span><span class="pull-right glyphicon"></span></h3><div class="method-summary"><p>List of registered transports.</p>
</div></div><div class="panel-collapse collapse" id="Logger__transports_body"><div class="panel-body"><div></div><div class="showcode"><button class="btn btn-info">Show code</button><span> (defined in<a href="https://github.com/igoramadas/expresser/blob/master//lib/logger.coffee#L30">/lib/logger.coffee:30</a>)</span></div><pre class="sourcecode prettyprint .linenums:30">transports: {}</pre></div></div></div></section></div></div></div><script src="https://code.jquery.com/jquery-3.2.1.min.js"></script><script src="../bootstrap/js/bootstrap.min.js"></script><script src="../google-code-prettify/prettify.js"></script><script src="../script.js"></script><script src="../group-examples.js"></script><a href="https://github.com/igoramadas/expresser"><img class="github-ribbon" src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png" alt="Fork me on GitHub"></a></body></html>