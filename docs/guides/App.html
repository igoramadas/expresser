<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Expresser - App</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-9331973-3"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-9331973-3');
</script><script>if (location.protocol.match(/^http/) && location.pathname.match('\.html') === null && location.pathname.slice(-1) !== '/') {
  location.href = location.href + '/';
}</script><link href="../bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"><!--[if lt IE 9]><script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script><script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script><![endif]--><link href="../google-code-prettify/prettify.css" rel="stylesheet" type="text/css"><link href="../style.css" rel="stylesheet" type="text/css"><link href="../tocify/jquery.tocify.css" rel="stylesheet" type="text/css"></head><body data-spy="scroll" data-target=".sidebar"><nav class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="navbar-header"><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#top-navigation-collapse"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div class="collapse navbar-collapse" id="top-navigation-collapse"><ul class="nav navbar-nav"><li><a href="../index.html">Home</a></li><li class="dropdown active"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Guides - App <span class="caret"></span></a><ul class="dropdown-menu"><li><a href="../guides/App.html">App</a></li><li><a href="../guides/Errors.html">Errors</a></li><li><a href="../guides/Events.html">Events</a></li><li><a href="../guides/Logger.html">Logger</a></li><li><a href="../guides/Settings.html">Settings</a></li><li><a href="../guides/Utils.html">Utils</a></li></ul></li><li><a href="../classes/index.html">Classes</a></li><li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Files <span class="caret"></span></a><ul class="dropdown-menu"><li><a href="../files/app.coffee.html">app.coffee</a></li><li><a href="../files/errors.coffee.html">errors.coffee</a></li><li><a href="../files/events.coffee.html">events.coffee</a></li><li><a href="../files/index.coffee.html">index.coffee</a></li><li><a href="../files/logger.coffee.html">logger.coffee</a></li><li><a href="../files/settings.coffee.html">settings.coffee</a></li><li><a href="../files/utils.coffee.html">utils.coffee</a></li><li><a href="../files/aws.dynamodb.coffee.html">aws/dynamodb.coffee</a></li><li><a href="../files/aws.index.coffee.html">aws/index.coffee</a></li><li><a href="../files/aws.s3.coffee.html">aws/s3.coffee</a></li><li><a href="../files/aws.sns.coffee.html">aws/sns.coffee</a></li><li><a href="../files/cron.index.coffee.html">cron/index.coffee</a></li><li><a href="../files/downloader.index.coffee.html">downloader/index.coffee</a></li><li><a href="../files/gcloud.datastore.coffee.html">gcloud/datastore.coffee</a></li><li><a href="../files/gcloud.index.coffee.html">gcloud/index.coffee</a></li><li><a href="../files/gcloud.storage.coffee.html">gcloud/storage.coffee</a></li><li><a href="../files/logger-file.index.coffee.html">logger-file/index.coffee</a></li><li><a href="../files/logger-logentries.index.coffee.html">logger-logentries/index.coffee</a></li><li><a href="../files/logger-loggly.index.coffee.html">logger-loggly/index.coffee</a></li><li><a href="../files/mailer.index.coffee.html">mailer/index.coffee</a></li><li><a href="../files/mailer.templates.coffee.html">mailer/templates.coffee</a></li><li><a href="../files/metrics.httpserver.coffee.html">metrics/httpserver.coffee</a></li><li><a href="../files/metrics.index.coffee.html">metrics/index.coffee</a></li><li><a href="../files/metrics.percentile.coffee.html">metrics/percentile.coffee</a></li><li><a href="../files/mongodb.index.coffee.html">mongodb/index.coffee</a></li><li><a href="../files/sockets.index.coffee.html">sockets/index.coffee</a></li><li><a href="../files/utils.browser.coffee.html">utils/browser.coffee</a></li><li><a href="../files/utils.data.coffee.html">utils/data.coffee</a></li><li><a href="../files/utils.io.coffee.html">utils/io.coffee</a></li><li><a href="../files/utils.network.coffee.html">utils/network.coffee</a></li><li><a href="../files/utils.system.coffee.html">utils/system.coffee</a></li></ul></li></ul><div class="options"><label class="checkbox"><input id="options-private" type="checkbox"> Private</label></div></div></div></nav><div class="container-fluid content"><div class="row"><div class="hidden-xs col-sm-3"><div id="toc"></div></div><div class="col-sm-9"><div><h1 id="app">App</h1>
<p>This is the core of any Expresser app. It holds the HTTP(s) server along session and cookie secrets, asset
bindings, middlewares etc. By default it will bind to all local addresses on port 8080 (when running
on your local environment). The Express server is exposed via the <code>server</code> property on the App module.</p>
<h2 id="assets">Assets</h2>
<p>By default Expresser will use Pug for HTML templates, Stylus or vanilla CSS for styling, and Javacsript
or CoffeeScript for scripting, on the following paths:</p>
<ul>
<li>/views - the .pug views</li>
<li>/assets/css - the .styl or .css styles</li>
<li>/assets/js - the .coffee or .js scripts</li>
</ul>
<h2 id="cookies-and-sessions">Cookies and sessions</h2>
<p>If you&#39;re planning to use cookies and/or sessions on your app, please update the <code>settings.app.cookieSecret</code> and
<code>settings.app.sessionSecret</code> with a strong encryption key of your choice.</p>
<h2 id="adding-extra-middleware">Adding extra middleware</h2>
<p>You can bind your own middlewares to the Express server by using the <code>prependMiddlewares</code> and <code>appendMiddlewares</code>
collections. For example to use the <code>passport</code> middleware, which must be registered before the main ones:</p>
<pre><code>var expresser = require(&quot;expresser&quot;)
var passport = require(&quot;passport&quot;)
expresser.app.prependMiddlewares.push(passport.initialize())
expresser.app.prependMiddlewares.push(passport.session())
expresser.init()
</code></pre><p>And similarly, if you want to register a middleware after the main ones:</p>
<pre><code>var myCustomMiddleware = require(&quot;some-middleware&quot;)
expresser.app.appendMiddlewares.push(myCustomMiddleware)
</code></pre><h2 id="rendering-sending-the-response-to-the-client">Rendering / sending the response to the client</h2>
<p>The App module has some helper methods to send the response to the browser using different formats.</p>
<h4 id="renderview-req-res-view-options-">renderView(req, res, view, options)</h4>
<p>Renders a Pug view with options. By default Pug views are stored on /views. For example
to render the <code>testview.pug</code> containing the placeholders <code>pageTitle</code> and <code>pageUrl</code>:</p>
<pre><code>var app = expresser.app
var options = {pageTitle: &quot;My Page&quot;, pageUrl: &quot;/testview/some/url&quot;}

app.server.get(&quot;/testview&quot;, function (req, res) {
    app.renderView(req, res, &quot;testview.pug&quot;, options)
})
</code></pre><h4 id="renderjson-req-res-data-">renderJson(req, res, data)</h4>
<p>Sends JSON data to the client. For example:</p>
<pre><code>var app = expresser.app
var data = {something: &quot;Here&quot;, code: 123, somethingElse: true}

app.server.get(&quot;/testjson&quot;, function (req, res) {
    app.renderJson(req, res, data)
})
</code></pre><h4 id="rendererror-req-res-error-status-500-">renderError(req, res, error, status = 500)</h4>
<p>Sends an error to the client as JSON. For example when a procedure fails (access denied or another error):</p>
<pre><code>var app = expresser.app

app.server.get(&quot;/dosomething&quot;, function (req, res) {
    try {
        doSomething()
    } catch (ex) {
        if (ex.reason == &quot;Not authorized&quot;) {
            app.renderError(req, res, &quot;You have no rights to access this resource.&quot;, 403)
        } else {
            app.renderError(req, res, ex)
        }
    }
})
</code></pre><h4 id="renderimage-req-res-filename-options-">renderImage(req, res, filename, options)</h4>
<p>Renders an image (JPG, GIF, PNG etc...) to the client.</p>
<pre><code>var app = expresser.app

app.server.get(&quot;/myimage&quot;, function (req, res) {
    app.renderImage(req, res, __dirname + &quot;/myimage.jpg&quot;)
})
</code></pre><hr>
<p><em>For detailed info on specific features, check the annotated source on /docs/source/app.html</em></p>
<h2 id="running-with-process-managers-pm2-forever-etc-">Running with process managers (pm2, forever etc)</h2>
<p>Please note that the paths set on your application settings might not work if you&#39;re using process managers to start your app.</p>
</div></div></div></div><script src="https://code.jquery.com/jquery-3.2.1.min.js"></script><script src="../bootstrap/js/bootstrap.min.js"></script><script src="../google-code-prettify/prettify.js"></script><script src="../script.js"></script><script src="../group-examples.js"></script><script src="http://code.jquery.com/ui/1.9.0/jquery-ui.min.js"></script><script src="../tocify/jquery.tocify.js"></script><script>$(function() {
  $('#toc').tocify({extendPage:false, scrollTo:60});
});</script><a href="https://github.com/igoramadas/expresser"><img class="github-ribbon" src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png" alt="Fork me on GitHub"></a></body></html>